import { IMoveEvent, IZoomEvent, IRotateEvent, ITimer, IDragEvent, IPointerEvent, ILeafList, IPointDataMap, IFunction, ILeaf, IInteraction, IInteractionCanvas, ISelector, IInteractionConfig, IMoveConfig, IPointerConfig, ICursorType, IPickBottom, IBounds, IEventListenerId, IBooleanMap, IUIEvent, IKeepTouchData, IKeyEvent, IPickOptions, IClientPointData, IPointData, IEvent, IObject, IDropEvent, ISwipeEvent, IMultiTouchData, ICursorTypeMap } from '@leafer/interface';
import { LeafList } from '@leafer/core';

declare class Transformer {
    get transforming(): boolean;
    protected interaction: InteractionBase;
    protected moveData: IMoveEvent;
    protected zoomData: IZoomEvent;
    protected rotateData: IRotateEvent;
    protected transformTimer: ITimer;
    constructor(interaction: InteractionBase);
    move(data: IMoveEvent): void;
    zoom(data: IZoomEvent): void;
    rotate(data: IRotateEvent): void;
    protected transformEndWait(): void;
    transformEnd(): void;
    protected moveEnd(): void;
    protected zoomEnd(): void;
    protected rotateEnd(): void;
    destroy(): void;
}

declare class Dragger {
    protected interaction: InteractionBase;
    moving: boolean;
    dragging: boolean;
    dragData: IDragEvent;
    protected downData: IPointerEvent;
    draggableList: ILeafList;
    realDraggableList: ILeafList;
    protected dragOverPath: ILeafList;
    protected dragEnterPath: ILeafList;
    protected dragStartPoints: IPointDataMap;
    protected autoMoveTimer: ITimer;
    canAnimate: boolean;
    canDragOut: boolean;
    protected animateWait: IFunction;
    constructor(interaction: InteractionBase);
    setDragData(data: IPointerEvent): void;
    getList(realDraggable?: boolean, hover?: boolean): ILeafList;
    checkDrag(data: IPointerEvent, canDrag: boolean): void;
    dragStart(data: IPointerEvent, canDrag: boolean): void;
    protected setDragStartPoints(list: ILeafList | ILeaf[]): void;
    protected getDraggableList(path: ILeafList): void;
    protected drag(data: IPointerEvent): void;
    protected dragReal(): void;
    dragOverOrOut(data: IPointerEvent): void;
    dragEnterOrLeave(data: IPointerEvent): void;
    dragEnd(data: IPointerEvent, speed?: number): void;
    protected dragEndReal(data?: IPointerEvent): void;
    protected animate(func?: IFunction, off?: 'off'): void;
    protected swipe(data: IPointerEvent, downData: IPointerEvent, dragData: IDragEvent, endDragData: IDragEvent): void;
    protected drop(data: IPointerEvent, dropList: ILeafList, dragEnterPath: ILeafList): void;
    protected dragReset(): void;
    checkDragOut(data: IPointerEvent): void;
    protected autoMoveOnDragOut(data: IPointerEvent): void;
    protected autoMoveCancel(): void;
    destroy(): void;
}

declare class InteractionBase implements IInteraction {
    target: ILeaf;
    canvas: IInteractionCanvas;
    selector: ISelector;
    running: boolean;
    get dragging(): boolean;
    get transforming(): boolean;
    get moveMode(): boolean;
    get canHover(): boolean;
    get isDragEmpty(): boolean;
    get isMobileDragEmpty(): boolean;
    get isHoldMiddleKey(): boolean;
    get isHoldRightKey(): boolean;
    get isHoldSpaceKey(): boolean;
    config: IInteractionConfig;
    protected get m(): IMoveConfig;
    protected get p(): IPointerConfig;
    cursor: ICursorType | ICursorType[];
    get hitRadius(): number;
    bottomList?: IPickBottom[];
    shrinkCanvasBounds: IBounds;
    downData: IPointerEvent;
    hoverData: IPointerEvent;
    focusData: ILeaf;
    downTime: number;
    protected overPath: LeafList;
    protected enterPath: LeafList;
    protected waitMenuTap: boolean;
    protected waitRightTap: boolean;
    protected waitTap: boolean;
    protected longPressTimer: ITimer;
    protected longPressed: boolean;
    protected tapCount: number;
    protected tapTimer: ITimer;
    protected dragger: Dragger;
    protected transformer: Transformer;
    protected __eventIds: IEventListenerId[];
    protected defaultPath: ILeafList;
    protected downKeyMap: IBooleanMap;
    constructor(target: ILeaf, canvas: IInteractionCanvas, selector: ISelector, userConfig?: IInteractionConfig);
    start(): void;
    stop(): void;
    receive(_event: any): void;
    pointerDown(data?: IPointerEvent, useDefaultPath?: boolean): void;
    pointerMove(data?: IPointerEvent): void;
    pointerMoveReal(data: IPointerEvent): void;
    pointerUp(data?: IPointerEvent): void;
    pointerCancel(): void;
    multiTouch(data: IUIEvent, list: IKeepTouchData[]): void;
    menu(data: IPointerEvent): void;
    menuTap(data: IPointerEvent): void;
    move(data: IMoveEvent): void;
    zoom(data: IZoomEvent): void;
    rotate(data: IRotateEvent): void;
    transformEnd(): void;
    keyDown(data: IKeyEvent): void;
    keyUp(data: IKeyEvent): void;
    protected pointerHover(data: IPointerEvent): void;
    protected pointerOverOrOut(data: IPointerEvent): void;
    protected pointerEnterOrLeave(data: IPointerEvent): void;
    protected touchLeave(data: IPointerEvent): void;
    protected tap(data: IPointerEvent): void;
    findPath(data: IPointerEvent, options?: IPickOptions): ILeafList;
    isRootPath(data: IPointerEvent): boolean;
    isTreePath(data: IPointerEvent): boolean;
    protected checkPath(data: IPointerEvent, useDefaultPath?: boolean): void;
    canMove(data: IPointerEvent): boolean;
    isDrag(leaf: ILeaf): boolean;
    isPress(leaf: ILeaf): boolean;
    isHover(leaf: ILeaf): boolean;
    isFocus(leaf: ILeaf): boolean;
    cancelHover(): void;
    updateDownData(data?: IPointerEvent, options?: IPickOptions, merge?: boolean): void;
    updateHoverData(data?: IPointerEvent): void;
    updateCursor(data?: IPointerEvent): void;
    setCursor(cursor: ICursorType | ICursorType[]): void;
    getLocal(clientPoint: IClientPointData, updateClient?: boolean): IPointData;
    protected emitTap(data: IPointerEvent): void;
    protected emitDoubleTap(data: IPointerEvent): void;
    pointerWaitCancel(): void;
    protected tapWait(): void;
    protected tapWaitCancel(): void;
    protected longPressWait(data: IPointerEvent): void;
    protected longTap(data: IPointerEvent): boolean;
    protected longPressWaitCancel(): void;
    protected __onResize(): void;
    protected __listenEvents(): void;
    protected __removeListenEvents(): void;
    emit(type: string, data: IUIEvent, path?: ILeafList, excludePath?: ILeafList): void;
    destroy(): void;
}

declare const InteractionHelper: {
    getMoveEventData(center: IPointData, move: IPointData, event: IEvent): IMoveEvent;
    getRotateEventData(center: IPointData, angle: number, event: IEvent): IRotateEvent;
    getZoomEventData(center: IPointData, scale: number, event: IEvent): IZoomEvent;
    getDragEventData(startPoint: IPointData, lastPoint: IPointData, event: IPointerEvent): IDragEvent;
    getDropEventData(event: IPointerEvent, list: ILeafList, data: IObject): IDropEvent;
    getSwipeDirection(angle: number): string;
    getSwipeEventData(startPoint: IPointData, lastDragData: IDragEvent, event: IPointerEvent): ISwipeEvent;
    getBase(e: IObject): IUIEvent;
    pathHasEventType(path: ILeafList, type: string): boolean;
    filterPathByEventType(path: ILeafList, type: string): ILeafList;
    pathCanDrag(path: ILeafList): boolean;
    pathHasOutside(path: ILeafList): boolean;
};

declare const MultiTouchHelper: {
    getData(list: IKeepTouchData[]): IMultiTouchData;
};

declare class Cursor {
    static custom: ICursorTypeMap;
    static set(name: string, value: ICursorType | ICursorType[]): void;
    static get(name: string): ICursorType | ICursorType[];
}

export { Cursor, InteractionBase, InteractionHelper, MultiTouchHelper };
