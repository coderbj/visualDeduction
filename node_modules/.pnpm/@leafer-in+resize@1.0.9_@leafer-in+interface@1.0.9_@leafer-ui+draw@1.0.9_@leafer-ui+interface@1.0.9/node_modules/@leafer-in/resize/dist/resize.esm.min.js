import{PathCommandMap as t,MatrixHelper as e,Direction9 as i,Leaf as s,Text as o,Path as a,Line as c,Polygon as n,Group as h,Box as r}from"@leafer-ui/draw";const{M:l,L:_,C:f,Q:p,Z:u,N:d,D:b,X:g,G:z,F:k,O:R,P:y,U:w}=t,x={scale(t,e,i){if(!t)return;let s,o=0,a=t.length;for(;o<a;)switch(s=t[o],s){case l:case _:S(t,e,i,o,1),o+=3;break;case f:S(t,e,i,o,3),o+=7;break;case p:S(t,e,i,o,2),o+=5;break;case u:o+=1;break;case d:S(t,e,i,o,2),o+=5;break;case b:S(t,e,i,o,2),o+=9;break;case g:S(t,e,i,o,2),o+=6;break;case z:S(t,e,i,o,2),o+=9;break;case k:S(t,e,i,o,2),o+=5;break;case R:t[o]=z,t.splice(o+4,0,t[o+3],0),S(t,e,i,o,2),o+=9,a+=2;break;case y:t[o]=k,t.splice(o+4,0,t[o+3]),S(t,e,i,o,2),o+=5,a+=1;break;case w:S(t,e,i,o,2),o+=6}},scalePoints(t,e,i,s,o){for(let a=o?s+1:0,c=o?a+2*o:t.length;a<c;a+=2)t[a]*=e,t[a+1]*=i}},{scalePoints:S}=x,m=e.get(),{topLeft:C,top:I,topRight:O,right:B,bottom:P,left:v}=i;function X(t,e,i){t.pathInputed?F(t,e,i):(1!==e&&(t.width*=e),1!==i&&(t.height*=i))}function D(t,e,i){const{app:s}=t,o=s&&s.editor;let a=e;if(o.editing){const s=t.__layout;let{width:c,height:n}=s.boxBounds;switch(c*=i-e,n*=e-i,o.resizeDirection){case I:case P:a=i,s.affectScaleOrRotation?t.moveInner(-c/2,0):t.x-=c/2;break;case v:case B:s.affectScaleOrRotation?t.moveInner(0,-n/2):t.y-=n/2;break;case C:case O:s.affectScaleOrRotation?t.moveInner(0,-n):t.y-=n}}t.fontSize*=a;const c=t.__;c.__autoWidth||(t.width*=a),c.__autoHeight||(t.height*=a)}function F(t,e,i){x.scale(t.__.path,e,i),t.path=t.__.path}function H(t,e,i){const{points:s}=t;"object"==typeof s[0]?s.forEach((t=>{t.x*=e,t.y*=i})):x.scalePoints(s,e,i),t.points=s}function L(t,e,i){const{children:s}=t;for(let t=0;t<s.length;t++)m.a=e,m.d=i,s[t].transform(m,!0)}const W=s.prototype;W.scaleResize=function(t,e=t,i){const s=this;i||s.editConfig&&"scale"===s.editConfig.editSize?(s.scaleX*=t,s.scaleY*=e):(t<0&&(s.scaleX*=-1,t=-t),e<0&&(s.scaleY*=-1,e=-e),this.__scaleResize(t,e))},W.__scaleResize=function(t,e){X(this,t,e)},W.resizeWidth=function(t){const e=t/this.getBounds("box","local").width;this.scaleOf(this.__layout.boxBounds,e,this.__.lockRatio?e:1,!0)},W.resizeHeight=function(t){const e=t/this.getBounds("box","local").height;this.scaleOf(this.__layout.boxBounds,this.__.lockRatio?e:1,e,!0)},o.prototype.__scaleResize=function(t,e){this.__.resizeFontSize||this.editConfig&&"font-size"===this.editConfig.editSize?D(this,t,e):X(this,t,e)},a.prototype.__scaleResize=function(t,e){F(this,t,e)},c.prototype.__scaleResize=function(t,e){this.pathInputed?F(this,t,e):this.points?H(this,t,e):this.width*=t},n.prototype.__scaleResize=function(t,e){this.pathInputed?F(this,t,e):this.points?H(this,t,e):X(this,t,e)},h.prototype.__scaleResize=function(t,e){L(this,t,e)},r.prototype.__scaleResize=function(t,e){this.__.__autoSize&&this.children.length?L(this,t,e):(X(this,t,e),this.__.resizeChildren&&L(this,t,e))};export{x as PathScaler,X as scaleResize,D as scaleResizeFontSize,L as scaleResizeGroup,F as scaleResizePath,H as scaleResizePoints};
