import{ImageData as t,dataProcessor as e,boundsType as n,registerUI as o,Image as i}from"@leafer-ui/draw";function r(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var d=t.length-1;d>=0;d--)(i=t[d])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}"function"==typeof SuppressedError&&SuppressedError;class s extends t{setText(t){this._text=t,this.__htmlChanged=!0}}let d=class extends i{get __tag(){return"HTMLText"}get editInner(){return"TextEditor"}constructor(t){super(t)}__updateBoxBounds(){const t=this.__;if(t.__htmlChanged){const e=document.createElement("div"),{style:n}=e;n.all="initial",n.position="absolute",n.visibility="hidden",e.innerHTML=this.text,document.body.appendChild(e);const{width:o,height:i}=e.getBoundingClientRect(),r=o+10,s=`<svg xmlns="http://www.w3.org/2000/svg" width="${r}" height="${i}">\n                        <foreignObject width="${r}" height="${i}">\n                            <style>\n                                * {\n                                    margin: 0;\n                                    padding: 0;\n                                    box-sizing: border-box;\n                                }\n                            </style>\n                            <body xmlns="http://www.w3.org/1999/xhtml">\n                                ${this.text}\n                            </body>\n                        </foreignObject>\n                    </svg>`;t.__setImageFill("data:image/svg+xml,"+encodeURIComponent(s)),t.__naturalWidth=r/t.pixelRatio,t.__naturalHeight=i/t.pixelRatio,t.__htmlChanged=!1,e.remove()}super.__updateBoxBounds()}};r([e(s)],d.prototype,"__",void 0),r([n("")],d.prototype,"text",void 0),d=r([o()],d);export{d as HTMLText,s as HTMLTextData};
