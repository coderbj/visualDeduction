"use strict";var e=require("@leafer-ui/draw");const{M:t,L:s,C:i,Q:o,Z:a,N:c,D:n,X:h,G:r,F:l,O:p,P:_,U:f}=e.PathCommandMap,u={scale(e,u,z){if(!e)return;let g,b=0,R=e.length;for(;b<R;)switch(g=e[b],g){case t:case s:d(e,u,z,b,1),b+=3;break;case i:d(e,u,z,b,3),b+=7;break;case o:d(e,u,z,b,2),b+=5;break;case a:b+=1;break;case c:d(e,u,z,b,2),b+=5;break;case n:d(e,u,z,b,2),b+=9;break;case h:d(e,u,z,b,2),b+=6;break;case r:d(e,u,z,b,2),b+=9;break;case l:d(e,u,z,b,2),b+=5;break;case p:e[b]=r,e.splice(b+4,0,e[b+3],0),d(e,u,z,b,2),b+=9,R+=2;break;case _:e[b]=l,e.splice(b+4,0,e[b+3]),d(e,u,z,b,2),b+=5,R+=1;break;case f:d(e,u,z,b,2),b+=6}},scalePoints(e,t,s,i,o){for(let a=o?i+1:0,c=o?a+2*o:e.length;a<c;a+=2)e[a]*=t,e[a+1]*=s}},{scalePoints:d}=u,z=e.MatrixHelper.get(),{topLeft:g,top:b,topRight:R,right:x,bottom:k,left:y}=e.Direction9;function P(e,t,s){e.pathInputed?w(e,t,s):(1!==t&&(e.width*=t),1!==s&&(e.height*=s))}function S(e,t,s){const{app:i}=e,o=i&&i.editor;let a=t;if(o.editing){const i=e.__layout;let{width:c,height:n}=i.boxBounds;switch(c*=s-t,n*=t-s,o.resizeDirection){case b:case k:a=s,i.affectScaleOrRotation?e.moveInner(-c/2,0):e.x-=c/2;break;case y:case x:i.affectScaleOrRotation?e.moveInner(0,-n/2):e.y-=n/2;break;case g:case R:i.affectScaleOrRotation?e.moveInner(0,-n):e.y-=n}}e.fontSize*=a;const c=e.__;c.__autoWidth||(e.width*=a),c.__autoHeight||(e.height*=a)}function w(e,t,s){u.scale(e.__.path,t,s),e.path=e.__.path}function m(e,t,s){const{points:i}=e;"object"==typeof i[0]?i.forEach((e=>{e.x*=t,e.y*=s})):u.scalePoints(i,t,s),e.points=i}function C(e,t,s){const{children:i}=e;for(let e=0;e<i.length;e++)z.a=t,z.d=s,i[e].transform(z,!0)}const B=e.Leaf.prototype;B.scaleResize=function(e,t=e,s){const i=this;s||i.editConfig&&"scale"===i.editConfig.editSize?(i.scaleX*=e,i.scaleY*=t):(e<0&&(i.scaleX*=-1,e=-e),t<0&&(i.scaleY*=-1,t=-t),this.__scaleResize(e,t))},B.__scaleResize=function(e,t){P(this,e,t)},B.resizeWidth=function(e){const t=e/this.getBounds("box","local").width;this.scaleOf(this.__layout.boxBounds,t,this.__.lockRatio?t:1,!0)},B.resizeHeight=function(e){const t=e/this.getBounds("box","local").height;this.scaleOf(this.__layout.boxBounds,this.__.lockRatio?t:1,t,!0)},e.Text.prototype.__scaleResize=function(e,t){this.__.resizeFontSize||this.editConfig&&"font-size"===this.editConfig.editSize?S(this,e,t):P(this,e,t)},e.Path.prototype.__scaleResize=function(e,t){w(this,e,t)},e.Line.prototype.__scaleResize=function(e,t){this.pathInputed?w(this,e,t):this.points?m(this,e,t):this.width*=e},e.Polygon.prototype.__scaleResize=function(e,t){this.pathInputed?w(this,e,t):this.points?m(this,e,t):P(this,e,t)},e.Group.prototype.__scaleResize=function(e,t){C(this,e,t)},e.Box.prototype.__scaleResize=function(e,t){this.__.__autoSize&&this.children.length?C(this,e,t):(P(this,e,t),this.__.resizeChildren&&C(this,e,t))},exports.PathScaler=u,exports.scaleResize=P,exports.scaleResizeFontSize=S,exports.scaleResizeGroup=C,exports.scaleResizePath=w,exports.scaleResizePoints=m;
