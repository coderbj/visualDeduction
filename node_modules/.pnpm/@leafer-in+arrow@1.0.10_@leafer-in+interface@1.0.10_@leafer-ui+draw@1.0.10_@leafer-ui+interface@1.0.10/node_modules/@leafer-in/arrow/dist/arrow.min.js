this.LeaferIN=this.LeaferIN||{},this.LeaferIN.arrow=function(e,t){"use strict";function r(e,t,r,o){var n,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(a<3?n(s):a>3?n(t,r,s):n(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}"function"==typeof SuppressedError&&SuppressedError;class o extends t.LineData{}e.Arrow=class extends t.Line{get __tag(){return"Arrow"}constructor(e){super(e),this.__.__useArrow=!0}},r([t.dataProcessor(o)],e.Arrow.prototype,"__",void 0),r([t.strokeType("angle")],e.Arrow.prototype,"endArrow",void 0),e.Arrow=r([t.registerUI()],e.Arrow);const{M:n,L:a,C:s,Q:c,O:i}=t.PathCommandMap,{rotate:p,copyFrom:l,scale:f}=t.PointHelper,h={},u={layout(e,t,r,o,p,l,f){let h,u,b=0,w=e.length;for(;b<w;)switch(h=e[b],h){case n:case a:d(e,b+1,t,r,o,p,l,f),b+=3;break;case s:for(u=1;u<6;u+=2)d(e,b+u,t,r,o,p,l,f);b+=7;break;case c:for(u=1;u<4;u+=2)d(e,b+u,t,r,o,p,l,f);b+=5;break;case i:e[b+1]+=t,e[b+2]+=r,o&&(e[b+3]*=o),l&&(e[b+4]+=l,e[b+5]+=l),b+=7}},rotate(e,t,r){u.layout(e,0,0,1,1,t,r)}};function d(e,t,r,o,n,a,s,c){l(h,e[t],e[t+1]),s&&p(h,s,c),n&&f(h,n,a),e[t]=r+h.x,e[t+1]=o+h.y}const{layout:b,rotate:w}=u,{getAngle:_}=t.PointHelper,x={x:-.5},y={connect:x,offset:{x:-.71,bevelJoin:.36,roundJoin:.22},path:[1,-3,-3,2,0,0,2,-3,3]},k={connect:x,offset:{x:-1.207,bevelJoin:.854,roundJoin:.707},path:[1,-3,-3,2,0,0,2,-1,0]},A={connect:x,offset:{x:-.9,bevelJoin:.624,roundJoin:.4},path:[1,-3,0,2,-3,-2,2,0,0,2,-3,2,2,-3,0,1,-2.05,1.1,2,-2.05,-1.1]},g={connect:x,offset:{x:-1.1,bevelJoin:.872,roundJoin:.6},path:[1,-3,0,2,-3.5,-1.8,2,0,0,2,-3.5,1.8,2,-3,0,1,-2.25,.95,2,-2.25,-.95]},J={offset:x,path:[...A.path]};w(J.path,180,{x:-1.5,y:0});const P={connect:{x:-1.3},path:[1,1.8,-.1,2,1.8,0,26,0,0,1.8,0,359,0]},v={connect:{x:.5},path:[...P.path,1,0,0,26,0,0,1,0,360,0]},m={connect:{x:-1.3},path:[1,-1.4,0,2,-1.4,-1.4,2,1.4,-1.4,2,1.4,1.4,2,-1.4,1.4,2,-1.4,0]},L={path:[...m.path,2,-1.4,-.49,2,1,-.49,1,-1.4,.49,2,1,.49]},D=t.DataHelper.clone(m),H=t.DataHelper.clone(L);w(D.path,45),w(H.path,45);const I={angle:y,"angle-side":k,arrow:g,triangle:A,"triangle-flip":J,circle:v,"circle-line":P,square:L,"square-line":m,diamond:H,"diamond-line":D,mark:{offset:x,path:[1,0,-2,2,0,2]}};function M(e,t,r,o,n,a){const{strokeCap:s,strokeJoin:c}=e.__,{offset:i,connect:p,path:l}="object"==typeof t?t:I[t];let f=p?p.x:0,h=i?i.x:0;const u=[...l];return"none"!==s&&(f-=.5),i&&("round"===c&&i.roundJoin?h+=i.roundJoin:"bevel"===c&&i.bevelJoin&&(h+=i.bevelJoin)),h&&b(u,h,0),b(u,o.x,o.y,n,n,_(r,o)),a.x=(f+h)*n,u}const{M:O,L:j,C:C,Q:F,Z:R,N:N,D:U,X:S,G:T,F:q,O:E,P:Q,U:G}=t.PathCommandMap,{copy:W,copyFrom:X,getDistancePoint:Z}=t.PointHelper,z={},B={},K={},V={},Y={},$={list:I,addArrows(e,t){const{startArrow:r,endArrow:o,strokeWidth:n,__pathForRender:a}=e.__;let s,c=0,i=a.length,p=0,l=r&&"none"!==r;for(;c<i;){switch(s=a[c],s){case O:case j:(p<2||c+6>=i)&&(X(Y,a[c+1],a[c+2]),!p&&l&&W(B,Y)),c+=3;break;case C:1!==p&&c+7!==i||ee(a,V,Y,c+3),c+=7;break;case F:1!==p&&c+5!==i||ee(a,V,Y,c+1),c+=5;break;case R:return;case N:c+=5;break;case U:c+=9;break;case S:c+=6;break;case T:c+=9;break;case q:c+=5;break;case E:c+=7;break;case Q:c+=4;break;case G:1!==p&&c+6!==i||ee(a,V,Y,c+1),c+=6}if(p++,1===p&&s!==O)return;if(2===p&&l&&W(K,s===j?Y:V),c===i){const i=e.__.__pathForRender=t?[...a]:a;if(l&&(i.push(...M(e,r,K,B,n,z)),z.x&&(Z(B,K,-z.x,!0),i[1]=K.x,i[2]=K.y)),o&&"none"!==o&&(i.push(...M(e,o,V,Y,n,z)),z.x)){let e;switch(Z(Y,V,-z.x,!0),s){case j:e=c-3+1;break;case C:e=c-7+5;break;case F:e=c-5+3;break;case G:e=c-6+3}e&&te(i,V,e)}}else W(V,Y)}}};function ee(e,t,r,o){X(t,e[o],e[o+1]),X(r,e[o+2],e[o+3])}function te(e,t,r){e[r]=t.x,e[r+1]=t.y}function re(e){return t.decorateLeafAttr(e,(e=>t.attr({set(r){if(this.__setAttr(e,r)){const e=this.__;e.__useArrow="none"!==e.startArrow||"none"!==e.endArrow,t.doStrokeType(this)}}})))}const oe=t.UI.prototype;return re("none")(oe,"startArrow"),re("none")(oe,"endArrow"),Object.assign(t.PathArrow,$),e.ArrowData=o,e.PathArrowModule=$,e.PathMatrixHelper=u,e.arrowType=re,e}({},LeaferUI);
